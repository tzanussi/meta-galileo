This README file contains information on building the meta-galileo
BSP layer, and booting the resulting images.

Please see the corresponding sections below for details.

Dependencies
============

This layer depends on:

  URI: git://git.openembedded.org/bitbake
  branch: dora

  URI: git://git.openembedded.org/openembedded-core
  layers: meta
  branch: dora

  URI: git://git.yoctoproject.org/poky
  layers: poky
  branch: dora

  URI: git://git.yoctoproject.org/meta-intel
  layers: meta-intel
  branch: dora

  URI: git://git.yoctoproject.org/meta-intel-contrib
  layers: meta-galileo
  branch: dora

  URI: git://git.yoctoproject.org/linux-yocto-contrib
  layers: linux-yocto-micro-3.13
  branch: meta, lto, net-diet, standard/micro/galileo


Patches
=======

Please submit any patches against this BSP to the maintainer:

Maintainer: Tom Zanussi <tom.zanussi@linux.intel.com>


Table of Contents
=================

  I. Building the meta-galileo BSP layer


I. Building the meta-galileo BSP layer
========================================

--- replace with specific instructions for your layer ---

Use the clone-galileo script in this directory to set up

  $ clone-galileo <dirname>

After running this script, cd into <dirname> and source the environment:

  $ cd <dirname>
  $  source oe-init-build-env

Add meta-intel and meta-intel/meta-galileo to BBLAYERS in
build/conf/bblayers.conf e.g:

  /home/trz/yocto/micro/meta-intel \
  /home/trz/yocto/micro/meta-intel/meta-galileo \

Uncommment the following in build/conf/local.conf:

  # BB_NUMBER_THREADS ?= "4"
  # PARALLEL_MAKE ?= "-j 4"

Add to build/conf/local.conf (before MACHINE ??= "qemux86"):

  MACHINE ?= "galileo"
  DISTRO ?= "poky-micro"
 
Change SRC_URI in
meta-intel/meta-galileo/recipes-kernel/linux/linux-yocto-micro_3.13.bbappend
to the actual location of linux-yocto-3-13-galileo.git (in your
top-level poky dir) e.g.:

  SRC_URI = "git:///home/trz/yocto/micro-cur/linux-yocto-3-13-galileo.git;protocol=file;bareclone=1;branch=${KBRANCH},${KMETA},net-diet,lto;name=machine,meta,net-diet,lto"

Build the image:

  $ bitbake image-micro

Create a bootable sdcard image:

  $ wic create micro-galileo -e image-micro

The output will tell you the location of the .direct image
Burn that to the sdcard and boot the galileo board from it:

  $ sudo dd if=micro-galileo-201404041056-mmcblk0.direct of=/dev/sdg

Just doing nothing will boot into the microYocto image.

The built-in IP address is 192.168.1.223.  To change it, you'll either
need to do it manually after boot, or change the meta-galileo layer
and rebuild.

ssh to that address and login as root with no password:

  $ ssh -l root 192.168.1.223
